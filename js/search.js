var t=function t(e,n,a){"use strict";var c="<button type='button' class='local-search-close' id='local-search-close'></button>";$.ajax({url:e,dataType:"xml",success:function t(e){var l=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(n),i=document.getElementById(a);r.addEventListener("input",function(){var f='<ul class="search-result-list">',d=this.value.trim().toLowerCase().split(/[\s]+/);if(i.innerHTML="",!(this.value.trim().length<=0)){if(l.forEach(function(t){var l=!0;t.title&&""!==t.title.trim()||(t.title="Untitled");var r=t.title.trim().toLowerCase(),i=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url,n=-1,a=-1,c=-1;if(""!==i?d.forEach(function(t,e){n=r.indexOf(t),a=i.indexOf(t),n<0&&a<0?l=!1:(a<0&&(a=0),0==e&&(c=a))}):l=!1,l){f+="<li><a href='"+e+"' class='search-result-title'>"+r+"</a>";var s=t.content.trim().replace(/<[^>]+>/g,"");if(0<=c){var o=c-20,u=c+80;o<0&&(o=0),0==o&&(u=100),u>s.length&&(u=s.length);var h=s.substr(o,u);d.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),-1===(f+="</ul>").indexOf("<li>"))return i.innerHTML=c+'<div class="search-result-empty"><p><i class="fe fe-tired"></i> 没有找到内容，更换下搜索词试试吧~<p></div>';i.innerHTML=c+f}})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("#local-search-result").html("")})};