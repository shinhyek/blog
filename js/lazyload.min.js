!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(h,t){var u,a,p=window,A=h(p),g={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:p,data_attribute:"original",data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:m,load:m,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:m,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};function m(){}function d(t,e){return(e._$container==A?("innerHeight"in p?p.innerHeight:A.height())+A.scrollTop():e._$container.offset().top+e._$container.height())<=t.offset().top-e.threshold}function s(t,e){return(e._$container==A?A.scrollTop():e._$container.offset().top)>=t.offset().top+e.threshold+t.height()}function y(c,f){var _=0;c.each(function(t,e){var a=c.eq(t),r,n,o,l;if(!(a.width()<=0&&a.height()<=0||"none"===a.css("display")))if(f.vertical_only)if(s(a,f));else if(d(a,f)){if(++_>f.failure_limit)return!1}else i();else if(s(a,f)||(o=a,((l=f)._$container==A?h.fn.scrollLeft?A.scrollLeft():p.pageXOffset:l._$container.offset().left)>=o.offset().left+l.threshold+o.width()));else if(d(a,f)||(r=a,((n=f)._$container==A?A.width()+(h.fn.scrollLeft?A.scrollLeft():p.pageXOffset):n._$container.offset().left+n._$container.width())<=r.offset().left-n.threshold)){if(++_>f.failure_limit)return!1}else i();function i(){a.trigger("_lazyload_appear"),_=0}})}function w(e){return e.filter(function(t){return!e.eq(t).data("_lazyload_loadStarted")})}a=Object.prototype.toString,u=function t(e){return a.call(e).replace("[object ","").replace("]","")},h.fn.hasOwnProperty("lazyload")||(h.fn.lazyload=function(f){var t,_,e,d=this,a,r,n,o,l,i,c;return h.isPlainObject(f)||(f={}),h.each(g,function(t,e){var a=u(f[t]);-1!=h.inArray(t,["threshold","failure_limit","check_appear_throttle_time"])?"String"==a?f[t]=parseInt(f[t],10):"Number"!=a&&(f[t]=e):"container"==t?(f.hasOwnProperty(t)?f[t]==p||f[t]==document?f._$container=A:f._$container=h(f[t]):f._$container=A,delete f.container):!g.hasOwnProperty(t)||f.hasOwnProperty(t)&&a==u(g[t])||(f[t]=e)}),t="scroll"==f.event,e=0==f.check_appear_throttle_time?y:(a=y,r=f.check_appear_throttle_time,c=0,function(){n=this,o=arguments;var t=new Date-c;return i||(r<=t?s():i=setTimeout(s,r-t)),l}),_=t||"scrollstart"==f.event||"scrollstop"==f.event,d.each(function(t,e){var r=this,n=d.eq(t),a=n.attr("src"),o=n.attr("data-"+f.data_attribute),l=f.url_rewriter_fn==m?o:f.url_rewriter_fn.call(r,n,o),i=n.attr("data-"+f.data_srcset_attribute),c=n.is("img");if(n.data("_lazyload_loadStarted")||a==l)return n.data("_lazyload_loadStarted",!0),void(d=w(d));n.data("_lazyload_loadStarted",!1),c&&!a&&n.one("error",function(){n.attr("src",f.placeholder_real_img)}).attr("src",f.placeholder_data_img),n.one("_lazyload_appear",function(){var t,e=h.isArray(f.effect_params);function a(){t&&n.hide(),c?(i&&n.attr("srcset",i),l&&n.attr("src",l)):n.css("background-image",'url("'+l+'")'),t&&n[f.effect].apply(n,e?f.effect_params:[]),d=w(d)}n.data("_lazyload_loadStarted")||(t="show"!=f.effect&&h.fn[f.effect]&&(!f.effect_params||e&&0==f.effect_params.length),f.appear!=m&&f.appear.call(r,n,d.length,f),n.data("_lazyload_loadStarted",!0),f.no_fake_img_loader||i?(f.load!=m&&n.one("load",function(){f.load.call(r,n,d.length,f)}),a()):h("<img />").one("load",function(){a(),f.load!=m&&f.load.call(r,n,d.length,f)}).attr("src",l))}),_||n.on(f.event,function(){n.data("_lazyload_loadStarted")||n.trigger("_lazyload_appear")})}),_&&f._$container.on(f.event,function(){e(d,f)}),A.on("resize load",function(){e(d,f)}),h(function(){e(d,f)}),this;function s(){i=0,c=+new Date,l=a.apply(n,o),o=n=null}})});